//
//  main.m
//  sqlite
//
//  Created by mac on 2019/8/28.
//  Copyright © 2019 mac. All rights reserved.
//  以打开safari的历史浏览记录为例
//  safari原目录的数据库需要移植到别到目录才能打开
//  chrome到数据库需要创建副本读取 否则是加密

#import <Foundation/Foundation.h>
#import <sqlite3.h>

int main(int argc, const char * argv[]) {
    @autoreleasepool {
        sqlite3 *database_;//创建数据库

        sqlite3_stmt *stmt;//查询集合
        
        NSString *home=NSHomeDirectory();//当前主目录
        
        NSString *path1=[home stringByAppendingPathComponent:@"/Users/mac/Desktop/History.db"];
        //主目录+指定路径
 
        NSLog(@"%@",path1);
  
        if(sqlite3_open([path1 UTF8String], &database_) == SQLITE_OK)//打开数据库t;
            {
                //打开数据库成功
                NSLog(@"连接成功");
                
            }else{
                NSLog(@"失败");
            }
    NSString *  selsql = @"select * from history_visits ";//查询语句
        
        if (sqlite3_prepare_v2(database_,selsql.UTF8String, -1, &stmt, nil)==SQLITE_OK) {
            //执行查询 (数据库，查询语句，index，集合，要加的值)
            while (sqlite3_step(stmt) == SQLITE_ROW) {//等同于while reslut.next
                
                int c1=(int)sqlite3_column_int(stmt, 0);//第一列
                
           int c2=(int)sqlite3_column_int(stmt, 1);//第二列
                
              char *c3=(char *)sqlite3_column_text(stmt, 2);
                
                  char *c4=(char *)sqlite3_column_text(stmt, 3);
 
                NSLog(@"%d",c1);
                NSLog(@"%d",c2);
                NSLog(@"%s",c3);
                NSLog(@"%s",c4);
            }
        }
    }
                
    return argc;
       
}

---------------------------------------------------------------------------------------
2019-08-28 18:19:02.698915+0800 sqlite[41903:231163] /Users/mac/Desktop/History.db
2019-08-28 18:19:02.699637+0800 sqlite[41903:231163] 连接成功
2019-08-28 18:19:02.700384+0800 sqlite[41903:231163] 68
2019-08-28 18:19:02.700412+0800 sqlite[41903:231163] 58
2019-08-28 18:19:02.700432+0800 sqlite[41903:231163] 585121158.254715
2019-08-28 18:19:02.700448+0800 sqlite[41903:231163] 
2019-08-28 18:19:02.700463+0800 sqlite[41903:231163] 69
2019-08-28 18:19:02.700475+0800 sqlite[41903:231163] 59
2019-08-28 18:19:02.700489+0800 sqlite[41903:231163] 585121158.255804
2019-08-28 18:19:02.700500+0800 sqlite[41903:231163] (null)
2019-08-28 18:19:02.700515+0800 sqlite[41903:231163] 70
2019-08-28 18:19:02.700526+0800 sqlite[41903:231163] 60
2019-08-28 18:19:02.700539+0800 sqlite[41903:231163] 585121158.487418
2019-08-28 18:19:02.700553+0800 sqlite[41903:231163] Mobile WiFi
2019-08-28 18:19:02.700568+0800 sqlite[41903:231163] 71
2019-08-28 18:19:02.700579+0800 sqlite[41903:231163] 61
2019-08-28 18:19:02.700592+0800 sqlite[41903:231163] 585121165.657815
2019-08-28 18:19:02.700606+0800 sqlite[41903:231163] Mobile WiFi
2019-08-28 18:19:02.700621+0800 sqlite[41903:231163] 72
2019-08-28 18:19:02.707217+0800 sqlite[41903:231163] 62
2019-08-28 18:19:02.707253+0800 sqlite[41903:231163] 585121236.370119
2019-08-28 18:19:02.707274+0800 sqlite[41903:231163] 搜狗搜索引擎 - 上网从搜狗开始
2019-08-28 18:19:02.707300+0800 sqlite[41903:231163] 73
2019-08-28 18:19:02.707313+0800 sqlite[41903:231163] 63
2019-08-28 18:19:02.707328+0800 sqlite[41903:231163] 585121326.111883
2019-08-28 18:19:02.707343+0800 sqlite[41903:231163] 搜狗输入法 - 搜狗搜索
2019-08-28 18:19:02.707358+0800 sqlite[41903:231163] 74
2019-08-28 18:19:02.707371+0800 sqlite[41903:231163] 64
2019-08-28 18:19:02.707384+0800 sqlite[41903:231163] 585121422.688389
2019-08-28 18:19:02.707449+0800 sqlite[41903:231163] 谷歌浏览器 - 搜狗搜索
2019-08-28 18:19:02.707495+0800 sqlite[41903:231163] 75
2019-08-28 18:19:02.707509+0800 sqlite[41903:231163] 65
2019-08-28 18:19:02.707523+0800 sqlite[41903:231163] 585121435.070044
2019-08-28 18:19:02.707537+0800 sqlite[41903:231163] 谷歌浏览器下载 - 搜狗搜索
2019-08-28 18:19:02.707551+0800 sqlite[41903:231163] 76
2019-08-28 18:19:02.707563+0800 sqlite[41903:231163] 66
2019-08-28 18:19:02.707576+0800 sqlite[41903:231163] 585121453.890117
2019-08-28 18:19:02.707590+0800 sqlite[41903:231163] 
2019-08-28 18:19:02.707603+0800 sqlite[41903:231163] 77
2019-08-28 18:19:02.707615+0800 sqlite[41903:231163] 67
2019-08-28 18:19:02.707627+0800 sqlite[41903:231163] 585121456.351052
2019-08-28 18:19:02.707639+0800 sqlite[41903:231163] (null)
2019-08-28 18:19:02.707653+0800 sqlite[41903:231163] 78
2019-08-28 18:19:02.707665+0800 sqlite[41903:231163] 68
2019-08-28 18:19:02.707677+0800 sqlite[41903:231163] 585121456.351633
2019-08-28 18:19:02.707725+0800 sqlite[41903:231163] Google Chrome 网络浏览器
2019-08-28 18:19:02.707765+0800 sqlite[41903:231163] 79
2019-08-28 18:19:02.707780+0800 sqlite[41903:231163] 69
2019-08-28 18:19:02.707794+0800 sqlite[41903:231163] 585121485.867388
2019-08-28 18:19:02.707808+0800 sqlite[41903:231163] 微信 - 搜狗搜索
2019-08-28 18:19:02.707823+0800 sqlite[41903:231163] 80
2019-08-28 18:19:02.707835+0800 sqlite[41903:231163] 70
2019-08-28 18:19:02.707848+0800 sqlite[41903:231163] 585121557.57323
2019-08-28 18:19:02.707862+0800 sqlite[41903:231163] QQ - 搜狗搜索
2019-08-28 18:19:02.707877+0800 sqlite[41903:231163] 88
2019-08-28 18:19:02.707888+0800 sqlite[41903:231163] 58
2019-08-28 18:19:02.707901+0800 sqlite[41903:231163] 585122154.527269
2019-08-28 18:19:02.707914+0800 sqlite[41903:231163] 
2019-08-28 18:19:02.707928+0800 sqlite[41903:231163] 89
2019-08-28 18:19:02.707940+0800 sqlite[41903:231163] 59
2019-08-28 18:19:02.707953+0800 sqlite[41903:231163] 585122154.527637
2019-08-28 18:19:02.707965+0800 sqlite[41903:231163] (null)
2019-08-28 18:19:02.708106+0800 sqlite[41903:231163] 90
2019-08-28 18:19:02.708123+0800 sqlite[41903:231163] 60
2019-08-28 18:19:02.708137+0800 sqlite[41903:231163] 585122154.650695
2019-08-28 18:19:02.708151+0800 sqlite[41903:231163] Mobile WiFi
2019-08-28 18:19:02.708166+0800 sqlite[41903:231163] 91
2019-08-28 18:19:02.708179+0800 sqlite[41903:231163] 61
2019-08-28 18:19:02.708192+0800 sqlite[41903:231163] 585122164.64139
2019-08-28 18:19:02.708206+0800 sqlite[41903:231163] Mobile WiFi
2019-08-28 18:19:02.708220+0800 sqlite[41903:231163] 92
2019-08-28 18:19:02.708232+0800 sqlite[41903:231163] 58
2019-08-28 18:19:02.708245+0800 sqlite[41903:231163] 585127453.003576
2019-08-28 18:19:02.708259+0800 sqlite[41903:231163] 
2019-08-28 18:19:02.708273+0800 sqlite[41903:231163] 93
2019-08-28 18:19:02.708284+0800 sqlite[41903:231163] 59
2019-08-28 18:19:02.708297+0800 sqlite[41903:231163] 585127453.004222
2019-08-28 18:19:02.708309+0800 sqlite[41903:231163] (null)
2019-08-28 18:19:02.708324+0800 sqlite[41903:231163] 94
2019-08-28 18:19:02.708404+0800 sqlite[41903:231163] 60
2019-08-28 18:19:02.708439+0800 sqlite[41903:231163] 585127453.004747
2019-08-28 18:19:02.708466+0800 sqlite[41903:231163] Mobile WiFi
2019-08-28 18:19:02.708489+0800 sqlite[41903:231163] 95
2019-08-28 18:19:02.708505+0800 sqlite[41903:231163] 61
2019-08-28 18:19:02.708530+0800 sqlite[41903:231163] 585127458.055717
2019-08-28 18:19:02.708560+0800 sqlite[41903:231163] Mobile WiFi
2019-08-28 18:19:02.708577+0800 sqlite[41903:231163] 96
2019-08-28 18:19:02.708587+0800 sqlite[41903:231163] 58
2019-08-28 18:19:02.708598+0800 sqlite[41903:231163] 585127825.706786
2019-08-28 18:19:02.708610+0800 sqlite[41903:231163] 无法打开页面
2019-08-28 18:19:02.708623+0800 sqlite[41903:231163] 97
2019-08-28 18:19:02.708633+0800 sqlite[41903:231163] 58
2019-08-28 18:19:02.708644+0800 sqlite[41903:231163] 585127834.187282
2019-08-28 18:19:02.708656+0800 sqlite[41903:231163] 
2019-08-28 18:19:02.708667+0800 sqlite[41903:231163] 98
2019-08-28 18:19:02.710800+0800 sqlite[41903:231163] 59
2019-08-28 18:19:02.710840+0800 sqlite[41903:231163] 585127834.187571
2019-08-28 18:19:02.710857+0800 sqlite[41903:231163] (null)
2019-08-28 18:19:02.710883+0800 sqlite[41903:231163] 99
2019-08-28 18:19:02.710898+0800 sqlite[41903:231163] 60
2019-08-28 18:19:02.710914+0800 sqlite[41903:231163] 585127834.23661
2019-08-28 18:19:02.710931+0800 sqlite[41903:231163] Mobile WiFi
2019-08-28 18:19:02.710947+0800 sqlite[41903:231163] 100
2019-08-28 18:19:02.710961+0800 sqlite[41903:231163] 61
2019-08-28 18:19:02.710975+0800 sqlite[41903:231163] 585127840.393448
2019-08-28 18:19:02.710992+0800 sqlite[41903:231163] Mobile WiFi
2019-08-28 18:19:02.711008+0800 sqlite[41903:231163] 101
2019-08-28 18:19:02.711020+0800 sqlite[41903:231163] 73
2019-08-28 18:19:02.711035+0800 sqlite[41903:231163] 585128947.503075
2019-08-28 18:19:02.711051+0800 sqlite[41903:231163] Redirecting...
2019-08-28 18:19:02.711068+0800 sqlite[41903:231163] 102
2019-08-28 18:19:02.711081+0800 sqlite[41903:231163] 74
2019-08-28 18:19:02.711232+0800 sqlite[41903:231163] 585128948.937827
2019-08-28 18:19:02.711276+0800 sqlite[41903:231163] Production Deployment — Vue.js
2019-08-28 18:19:02.711307+0800 sqlite[41903:231163] 103
2019-08-28 18:19:02.711326+0800 sqlite[41903:231163] 61
2019-08-28 18:19:02.711342+0800 sqlite[41903:231163] 585129418.011666
2019-08-28 18:19:02.711358+0800 sqlite[41903:231163] Mobile WiFi
2019-08-28 18:19:02.711375+0800 sqlite[41903:231163] 104
Program ended with exit code: 1
