//
//  main.m
//  auto
//
//  Created by mac on 2019/8/26.
//  Copyright © 2019 mac. All rights reserved.
//

#import <Foundation/Foundation.h>

int main(int argc, const char * argv[]) {
 
        NSString *path=[NSString stringWithFormat:@"/Users/mac/Library/LaunchAgents/"];
    //～/library/launchagents下是开机程序自启的路径
        NSString *plist=[path stringByAppendingPathComponent:@"auto.plist"];//新建plist
        NSMutableDictionary *dict=[[NSMutableDictionary alloc]init];
        NSMutableArray *arr=[[NSMutableArray alloc]init];
        [dict setObject:@"auto"  forKey:@"Label"];//pilst必修和label同名
        [arr addObject:@"/Users/mac/Desktop/QQ.app/Contents/MacOS/QQ"];//二进制文件路径
        [dict setObject:arr forKey:@"Program"];//加载二进制文件路径
        [dict setObject:[NSNumber numberWithBool:true] forKey:@"RunAtLoad"];//自启
        [dict setObject:[NSNumber numberWithBool:true] forKey:@"KeepAlive"];//活跃
        [dict setObject:@"mac" forKey:@"UserName"];//用户
        [dict writeToFile:plist atomically:NO];//写入
    return 0;
}
